{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { totalPages, pages } from './pixabay-api';\n\n//\n\n// Function: initialize Lightbox\nfunction initializeLightbox() {\n  return new SimpleLightbox('.image-card-link', {\n    caption: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n  });\n}\n\n// Function: initialize iziToast\nfunction initializeIziToast() {\n  iziToast.settings({\n    timeout: 5000,\n    titleColor: '#fff',\n    position: 'topRight',\n    messageColor: '#fff',\n    icon: '',\n    close: false,\n  });\n}\n\n// Function: show notification\nexport function showNotification() {\n  initializeIziToast();\n\n  iziToast.error({\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    class: 'error-notification',\n    timeout: 5000,\n    iconUrl: '/img/octagon.svg',\n    titleColor: '#fff',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    progressBarColor: '#B51B1B',\n    close: true,\n  });\n}\n\n//\n\n// Function: update UI\nexport function updateUi(arrayImages) {\n  if (arrayImages.length <= 0) {\n    showNotification();\n  }\n\n  const gallery = document.querySelector('.gallery-list');\n  const markup = arrayImages\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"image-card\">\n              <a href=\"${largeImageURL}\" class=\"image-card-link\"><img src=\"${webformatURL}\" width=\"360\" height=\"200\" class=\"image-card-thumb\" alt=\"${tags}\">\n                <ul class=\"image-card-details-list\">\n                  <li class=\"image-card-details-list-item\">\n                      <p class=\"image-card-details-title\">Likes</p>\n                      <p class=\"image-card-details-text\">${likes}</p>\n                  </li>\n                  <li class=\"image-card-details-list-item\">\n                      <p class=\"image-card-details-title\">Views</p>\n                      <p class=\"image-card-details-text\">${views}</p>\n                  </li>\n                  <li class=\"image-card-details-list-item\">\n                      <p class=\"image-card-details-title\">Comments</p>\n                      <p class=\"image-card-details-text\">${comments}</p>\n                  </li>\n                  <li class=\"image-card-details-list-item\">\n                      <p class=\"image-card-details-title\">Downloads</p>\n                      <p class=\"image-card-details-text\">${downloads}</p>\n                  </li>\n                </ul>\n              </a>\n          </li>`;\n      }\n    )\n    .join('');\n\n  gallery.innerHTML = markup;\n  initializeLightbox().refresh();\n}\n\nexport function updateButtonUi(arrayImages) {\n  if (pages > totalPages) {\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n}\n\n// Function: get user input\nexport function getUserValue(event) {\n  const button = document.querySelector('button');\n  const value = event.target.value;\n\n  if (value) {\n    button.classList.remove('is-disable');\n    button.removeAttribute('disabled');\n    return value;\n  } else {\n    button.classList.add('is-disable');\n    button.setAttribute('disabled', '');\n    return '';\n  }\n}\n\n// Function: show loader\nexport function showLoader(status) {\n  const loader = document.querySelector('.loader');\n  loader.classList.toggle('is-active', status);\n}\n","import axios from 'axios';\nimport { showLoader, updateUi } from './render-functions';\n\nexport let limit = 40;\nexport let pages = 1;\nexport const totalPages = Math.ceil(100 / limit);\n\nexport async function fetchImageData(searchRequest) {\n  const urlOptions = {\n    http: 'https://pixabay.com/api/',\n    key: '43793393-3131be18ae161d81d2e9721c8',\n    options: 'image_type=photo&orientation=horizontal&safesearch=true',\n  };\n  const params = {\n    key: urlOptions.key,\n    q: searchRequest,\n    per_page: limit,\n    page: pages,\n    ...urlOptions.options, // Spread other options\n  };\n  try {\n    showLoader(true);\n\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    const response = await axios.get(urlOptions.http, { params });\n\n    const { data } = response;\n    const images = data.hits;\n    updateUi(images);\n\n    // Increment page for next request\n    pages++;\n  } catch (error) {\n    console.error(error);\n  } finally {\n    showLoader(false);\n  }\n}\n\n// api\n","import { fetchImageData } from './js/pixabay-api';\nimport { updateButtonUi } from './js/render-functions';\n\nconst refs = {\n  searchForm: document.querySelector('.search-bar-form'),\n  searchInput: document.querySelector('#search-bar'),\n  searchButton: document.querySelector('button'),\n  galleryList: document.querySelector('.gallery-list'),\n  extensionButton: document.querySelector('.extentionButton'),\n};\n\nlet userSearchRequestValue = '';\n\nrefs.searchInput.addEventListener('input', event => {\n  userSearchRequestValue = event.target.value;\n});\n\nrefs.searchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  fetchImageData(userSearchRequestValue);\n});\n\nrefs.searchButton.addEventListener('click', async () => {\n  if (!userSearchRequestValue) {\n    return;\n  }\n  try {\n    const images = await fetchImageData(userSearchRequestValue);\n    updateButtonUi(images);\n\n    setTimeout(() => {\n      refs.extensionButton.classList.remove('extentionButton');\n      refs.extensionButton.classList.add('div-button');\n    }, 1000);\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nrefs.extensionButton.addEventListener('click', async () => {\n  try {\n    const images = await fetchImageData(userSearchRequestValue);\n    updateButtonUi(images);\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["initializeLightbox","SimpleLightbox","initializeIziToast","iziToast","showNotification","updateUi","arrayImages","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateButtonUi","pages","totalPages","showLoader","status","limit","fetchImageData","searchRequest","urlOptions","params","resolve","response","axios","data","images","error","refs","userSearchRequestValue","event"],"mappings":"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"}